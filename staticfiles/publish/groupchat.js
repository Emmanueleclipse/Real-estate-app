
/*! groupchat.js - Author: BienFacile, License: Bienfacile, more info: http://www.bienfacile.com/ */
groupchat=new FeedObject('/json_groupchat/');groupchat.all=function(a,b,c){c.header='';c.footer='';c.wrapper='ul';c.wrapper_class='chat';var d=[];if(b.length==0)d.push({'class':'list-group-item','html':'Ditez quelque chose!'});else for(var e=0;e<b.length;e++){var f=b[e];d.push({'class':(f.mine?'left':'right')+' clearfix','infinitescroll':f.infinitescroll,'html':'<span class="chat-img pull-'+(f.mine?'left':'right')+'"><img src="'+(f.thumbnail?f.thumbnail:'')+'" alt="No photo"></span><div class="chat-body clearfix"><div class="header"><strong class="primary-font">'+f.agent+'</strong><small class="pull-right text-muted"><i class="fa fa-clock-o"></i> '+moment(f.when).fromNow()+'</small></div><p'+(f.isnew?' class="newmsg"':'')+'>'+this.shorttext(f.id,'message',240)+'</p></div>'});}this.list(a,d,c);};groupchat.form=function(){return [{type:'input',field:'message',title:'Ditez quelque chose...',submit:true}];};groupchat.me='groupchat';groupchat.notifications=true;groupchat.notify=function(a){notify('groupchat','/groupchat/','Group message from '+a.agent,textlength(a.message,240));};