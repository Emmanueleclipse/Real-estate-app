
/*! suppliers.js - Author: BienFacile, License: Bienfacile, more info: http://www.bienfacile.com/ */
suppliers=new FeedObject('/json_suppliers/');suppliers.me='suppliers';suppliers.all=function(a,b,c){c.isotope=false;output=[];c.wrapper='table';c.wrapper_class='table table-striped';c.childwrapper='tr';for(var d=0;d<b.length;d++){var e=b[d];output.push({'search':e.name.toLowerCase()+' '+e.tags.toLowerCase(),infinitescroll:e.infinitescroll,html:"<td><a href=\"javascript:suppliers.modal('#modal', { title : 'Modifier fournisseur', hidden: { id: "+e.id+" } });\">"+e.name+'</a></td><td>'+(e.tags?e.tags:'')+'</td><td>'+(e.description?e.description:'')+'</td>'});}this.list(a,output,c);};suppliers.form=function(){return [{type:'input',field:'name',title:'Fournisseur',required:true},{type:'textarea',field:'description',title:'Descriptif'},[[{type:'input',field:'siret',title:'SIRET'}],[{type:'input',field:'vat_number',title:'Numero TVA'}],[{type:'input',field:'category',title:'Categorie'}]],{type:'input',field:'tags',title:'Tags'}];};suppliers_facture=new FeedObject('/json_suppliers_facture/');suppliers_facture.me='suppliers_facture';suppliers_facture.all=function(a,b,c){var d,e;c.isotope=false;output=[];c.wrapper='table';c.wrapper_class='table table-striped';c.childwrapper='tr';for(var f=0;f<b.length;f++){d=b[f];e=concat_cells({'cell_open':"<td "+(d.paid!='true'?' style="background-color:red;"':'')+"><a href=\"javascript:suppliers_facture.modal('#modal', { title : 'Modifier facture', hidden: { id: "+d.id+" } });\">",'cell_close':'</a></td>','cells':[d.date,d.supplier,'&euro;'+d.amount,d.description]});output.push({'search':d.supplier.toLowerCase()+(d.description?' '+d.description.toLowerCase():''),infinitescroll:d.infinitescroll,html:e});}this.list(a,output,c);};suppliers_facture.form=function(){return [{type:'select2',field:'supplier',title:'Fournisseur',options:suppliers.options('name'),required:true},{type:'input',field:'invoice_number',title:'Numero facture',required:true},[[{type:'input',field:'amount',title:'Montant',required:true}],[{type:'boolean',field:'vat',title:'TVA inclus','default':'true'}],[{type:'boolean',field:'paid',title:'Paid','default':'false'}]],{type:'textarea',field:'description',title:'Descriptif'},{type:'date',field:'date',title:'Date du facture',required:true}];};